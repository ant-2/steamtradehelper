<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Trade helper</title>
  <script src="/js/jquery-1.12.4.min.js"></script>
  <script src="/js/underscore-1.8.3.min.js"></script>
  <!--Internal libs-->
  <script src="/js/backpacktf.js"></script>
  <script src="/js/common.js"></script>
  <script src="/modules/spreadsheet.js"></script>
  <style type="text/css">@import url(modules/spreadsheet.css);</style>

  <!--Templates-->
  <script type="text/template" id="sh-template">
    <section class="sh">
      <%_.each(data, function(value, key) {%>
      <div class="sh__row">
        <div class="sh__row-cell sh__row-cell_title"><%=key%></div>
        <%_.each(value, function(item) { %>
        <div class="sh__row-cell sh__row-cell_price"><%=item.price().value()+" "+item.price().currency()%></div>
        <%})%>
      </div>
      <%})%>
    </section>
  </script>
  <script>
    document.addEventListener("DOMContentLoaded", render);

    function render() {
      // retrieves data from a server
      var items, spreadsheet;
      items = loadDataFromServer();
      spreadsheet = new Spreadsheet();
//      spreadsheet = new Spreadsheet(items, $('#sh-template').html());
//      $("#container").html(spreadsheet.html());
      console.log('done');
    }

    function loadDataFromServer() {
      console.time('loadData');
      var
          result = new BackpacktfApi().items(false);
      console.timeEnd('loadData');
      return result;
    }
  </script>
</head>

<body>
  <section id="container">Container</section>
</body>
</html>